// detect mobile browser
function is_mobile(){var a=navigator.userAgent.toLowerCase(),b=a.match(/(ipad|ipod|iphone|blackberry|android)/);return b==null?!1:!0}(function(a){a.scrollToElement=function(b,c){c=c||750;a("html, body").animate({scrollTop:b.offset().top,scrollLeft:b.offset().left},c);return b};a.fn.scrollTo=function(b){b=b||"normal";return a.scrollToElement(this,b)};jQuery.fn.labelify=function(b){b=jQuery.extend({text:"title",labelledClass:""},b);var c={title:function(b){return a(b).attr("title")},label:function(b){return a("label[for="+b.id+"]").text()}},d,e=a(this);return a(this).each(function(){typeof b.text=="string"?d=c[b.text]:d=b.text;if(typeof d!="function")return;var f=d(this);if(!f)return;a(this).data("label",d(this).replace(/\n/g,""));a(this).focus(function(){if(this.value===a(this).data("label")){this.value=this.defaultValue;a(this).removeClass(b.labelledClass)}}).blur(function(){if(this.value===this.defaultValue){this.value=a(this).data("label");a(this).addClass(b.labelledClass)}});var g=function(){e.each(function(){if(this.value===a(this).data("label")){this.value=this.defaultValue;a(this).removeClass(b.labelledClass)}})};a(this).parents("form").submit(g);a(window).unload(g);if(this.value!==this.defaultValue)return;this.value=a(this).data("label");a(this).addClass(b.labelledClass)})}})(jQuery);(function(a){a.extend(a.fn,{validate:function(b){if(!this.length){b&&b.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return}var c=a.data(this[0],"validator");if(c)return c;c=new a.validator(b,this[0]);a.data(this[0],"validator",c);if(c.settings.onsubmit){this.find("input, button").filter(".cancel").click(function(){c.cancelSubmit=!0});c.settings.submitHandler&&this.find("input, button").filter(":submit").click(function(){c.submitButton=this});this.submit(function(b){function d(){if(c.settings.submitHandler){if(c.submitButton)var b=a("<input type='hidden'/>").attr("name",c.submitButton.name).val(c.submitButton.value).appendTo(c.currentForm);c.settings.submitHandler.call(c,c.currentForm);c.submitButton&&b.remove();return!1}return!0}c.settings.debug&&b.preventDefault();if(c.cancelSubmit){c.cancelSubmit=!1;return d()}if(c.form()){if(c.pendingRequest){c.formSubmitted=!0;return!1}return d()}c.focusInvalid();return!1})}return c},valid:function(){if(a(this[0]).is("form"))return this.validate().form();var b=!0,c=a(this[0].form).validate();this.each(function(){b&=c.element(this)});return b},removeAttrs:function(b){var c={},d=this;a.each(b.split(/\s/),function(a,b){c[b]=d.attr(b);d.removeAttr(b)});return c},rules:function(b,c){var d=this[0];if(b){var e=a.data(d.form,"validator").settings,f=e.rules,g=a.validator.staticRules(d);switch(b){case"add":a.extend(g,a.validator.normalizeRule(c));f[d.name]=g;c.messages&&(e.messages[d.name]=a.extend(e.messages[d.name],c.messages));break;case"remove":if(!c){delete f[d.name];return g}var h={};a.each(c.split(/\s/),function(a,b){h[b]=g[b];delete g[b]});return h}}var i=a.validator.normalizeRules(a.extend({},a.validator.metadataRules(d),a.validator.classRules(d),a.validator.attributeRules(d),a.validator.staticRules(d)),d);if(i.required){var j=i.required;delete i.required;i=a.extend({required:j},i)}return i}});a.extend(a.expr[":"],{blank:function(b){return!a.trim(""+b.value)},filled:function(b){return!!a.trim(""+b.value)},unchecked:function(a){return!a.checked}});a.validator=function(b,c){this.settings=a.extend({},a.validator.defaults,b);this.currentForm=c;this.init()};a.validator.format=function(b,c){if(arguments.length==1)return function(){var c=a.makeArray(arguments);c.unshift(b);return a.validator.format.apply(this,c)};arguments.length>2&&c.constructor!=Array&&(c=a.makeArray(arguments).slice(1));c.constructor!=Array&&(c=[c]);a.each(c,function(a,c){b=b.replace(new RegExp("\\{"+a+"\\}","g"),c)});return b};a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:!0,ignore:[],ignoreTitle:!1,onfocusin:function(a){this.lastActive=a;if(this.settings.focusCleanup&&!this.blockFocusCleanup){this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass);this.errorsFor(a).hide()}},onfocusout:function(a){!this.checkable(a)&&(a.name in this.submitted||!this.optional(a))&&this.element(a)},onkeyup:function(a){(a.name in this.submitted||a==this.lastElement)&&this.element(a)},onclick:function(a){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(b,c,d){a(b).addClass(c).removeClass(d)},unhighlight:function(b,c,d){a(b).removeClass(c).addClass(d)}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function d(b){var c=a.data(this[0].form,"validator");c.settings["on"+b.type]&&c.settings["on"+b.type].call(c,this[0])}this.labelContainer=a(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm);this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var b=this.groups={};a.each(this.settings.groups,function(c,d){a.each(d.split(/\s/),function(a,d){b[d]=c})});var c=this.settings.rules;a.each(c,function(b,d){c[b]=a.validator.normalizeRule(d)});a(this.currentForm).delegate("focusin focusout keyup",":text, :password, :file, select, textarea",d).delegate("click",":radio, :checkbox, select, option",d);this.settings.invalidHandler&&a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){this.checkForm();a.extend(this.submitted,this.errorMap);this.invalid=a.extend({},this.errorMap);this.valid()||a(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=this.elements();b[a];a++)this.check(b[a]);return this.valid()},element:function(b){b=this.clean(b);this.lastElement=b;this.prepareElement(b);this.currentElements=a(b);var c=this.check(b);c?delete this.invalid[b.name]:this.invalid[b.name]=!0;this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers));this.showErrors();return c},showErrors:function(b){if(b){a.extend(this.errorMap,b);this.errorList=[];for(var c in b)this.errorList.push({message:b[c],element:this.findByName(c)[0]});this.successList=a.grep(this.successList,function(a){return!(a.name in b)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){a.fn.resetForm&&a(this.currentForm).resetForm();this.submitted={};this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var b=0;for(var c in a)b++;return b},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()==0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus()}catch(b){}},findLastActive:function(){var b=this.lastActive;return b&&a.grep(this.errorList,function(a){return a.element.name==b.name}).length==1&&b},elements:function(){var b=this,c={};return a([]).add(this.currentForm.elements).filter(":input").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&b.settings.debug&&window.console&&console.error("%o has no name assigned",this);if(this.name in c||!b.objectLength(a(this).rules()))return!1;c[this.name]=!0;return!0})},clean:function(b){return a(b)[0]},errors:function(){return a(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=a([]);this.toHide=a([]);this.currentElements=a([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset();this.toHide=this.errorsFor(a)},check:function(b){b=this.clean(b);this.checkable(b)&&(b=this.findByName(b.name)[0]);var c=a(b).rules(),d=!1;for(method in c){var e={method:method,parameters:c[method]};try{var f=a.validator.methods[method].call(this,b.value.replace(/\r/g,""),b,e.parameters);if(f=="dependency-mismatch"){d=!0;continue}d=!1;if(f=="pending"){this.toHide=this.toHide.not(this.errorsFor(b));return}if(!f){this.formatAndAdd(b,e);return!1}}catch(g){this.settings.debug&&window.console&&console.log("exception occured when checking element "+b.id+", check the '"+e.method+"' method",g);throw g}}if(d)return;this.objectLength(c)&&this.successList.push(b);return!0},customMetaMessage:function(b,c){if(!a.metadata)return;var d=this.settings.meta?a(b).metadata()[this.settings.meta]:a(b).metadata();return d&&d.messages&&d.messages[c]},customMessage:function(a,b){var c=this.settings.messages[a];return c&&(c.constructor==String?c:c[b])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(arguments[a]!==undefined)return arguments[a];return undefined},defaultMessage:function(b,c){return this.findDefined(this.customMessage(b.name,c),this.customMetaMessage(b,c),!this.settings.ignoreTitle&&b.title||undefined,a.validator.messages[c],"<strong>Warning: No message defined for "+b.name+"</strong>")},formatAndAdd:function(a,b){var c=this.defaultMessage(a,b.method),d=/\$?\{(\d+)\}/g;typeof c=="function"?c=c.call(this,b.parameters,a):d.test(c)&&(c=jQuery.format(c.replace(d,"{$1}"),b.parameters));this.errorList.push({message:c,element:a});this.errorMap[a.name]=c;this.submitted[a.name]=c},addWrapper:function(a){this.settings.wrapper&&(a=a.add(a.parent(this.settings.wrapper)));return a},defaultShowErrors:function(){for(var a=0;this.errorList[a];a++){var b=this.errorList[a];this.settings.highlight&&this.settings.highlight.call(this,b.element,this.settings.errorClass,this.settings.validClass);this.showLabel(b.element,b.message)}this.errorList.length&&(this.toShow=this.toShow.add(this.containers));if(this.settings.success)for(var a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight)for(var a=0,c=this.validElements();c[a];a++)this.settings.unhighlight.call(this,c[a],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(b,c){var d=this.errorsFor(b);if(d.length){d.removeClass().addClass(this.settings.errorClass);d.attr("generated")&&d.html(c)}else{d=a("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(b),generated:!0}).addClass(this.settings.errorClass).html(c||"");this.settings.wrapper&&(d=d.hide().show().wrap("<"+this.settings.wrapper+"/>").parent());this.labelContainer.append(d).length||(this.settings.errorPlacement?this.settings.errorPlacement(d,a(b)):d.insertAfter(b))}if(!c&&this.settings.success){d.text("");typeof this.settings.success=="string"?d.addClass(this.settings.success):this.settings.success(d)}this.toShow=this.toShow.add(d)},errorsFor:function(b){var c=this.idOrName(b);return this.errors().filter(function(){return a(this).attr("for")==c})},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(b){var c=this.currentForm;return a(document.getElementsByName(b)).map(function(a,d){return d.form==c&&d.name==b&&d||null})},getLength:function(b,c){switch(c.nodeName.toLowerCase()){case"select":return a("option:selected",c).length;case"input":if(this.checkable(c))return this.findByName(c.name).filter(":checked").length}return b.length},depend:function(a,b){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,b):!0},dependTypes:{"boolean":function(a,b){return a},string:function(b,c){return!!a(b,c.form).length},"function":function(a,b){return a(b)}},optional:function(b){return!a.validator.methods.required.call(this,a.trim(b.value),b)&&"dependency-mismatch"},startRequest:function(a){if(!this.pending[a.name]){this.pendingRequest++;this.pending[a.name]=!0}},stopRequest:function(b,c){this.pendingRequest--;this.pendingRequest<0&&(this.pendingRequest=0);delete this.pending[b.name];if(c&&this.pendingRequest==0&&this.formSubmitted&&this.form()){a(this.currentForm).submit();this.formSubmitted=!1}else if(!c&&this.pendingRequest==0&&this.formSubmitted){a(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=!1}},previousValue:function(b){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:!0,message:this.defaultMessage(b,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},dateDE:{dateDE:!0},number:{number:!0},numberDE:{numberDE:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(b,c){b.constructor==String?this.classRuleSettings[b]=c:a.extend(this.classRuleSettings,b)},classRules:function(b){var c={},d=a(b).attr("class");d&&a.each(d.split(" "),function(){this in a.validator.classRuleSettings&&a.extend(c,a.validator.classRuleSettings[this])});return c},attributeRules:function(b){var c={},d=a(b);for(method in a.validator.methods){var e=d.attr(method);e&&(c[method]=e)}c.maxlength&&/-1|2147483647|524288/.test(c.maxlength)&&delete c.maxlength;return c},metadataRules:function(b){if(!a.metadata)return{};var c=a.data(b.form,"validator").settings.meta;return c?a(b).metadata()[c]:a(b).metadata()},staticRules:function(b){var c={},d=a.data(b.form,"validator");d.settings.rules&&(c=a.validator.normalizeRule(d.settings.rules[b.name])||{});return c},normalizeRules:function(b,c){a.each(b,function(d,e){if(e===!1){delete b[d];return}if(e.param||e.depends){var f=!0;switch(typeof e.depends){case"string":f=!!a(e.depends,c.form).length;break;case"function":f=e.depends.call(c,c)}f?b[d]=e.param!==undefined?e.param:!0:delete b[d]}});a.each(b,function(d,e){b[d]=a.isFunction(e)?e(c):e});a.each(["minlength","maxlength","min","max"],function(){b[this]&&(b[this]=Number(b[this]))});a.each(["rangelength","range"],function(){b[this]&&(b[this]=[Number(b[this][0]),Number(b[this][1])])});if(a.validator.autoCreateRanges){if(b.min&&b.max){b.range=[b.min,b.max];delete b.min;delete b.max}if(b.minlength&&b.maxlength){b.rangelength=[b.minlength,b.maxlength];delete b.minlength;delete b.maxlength}}b.messages&&delete b.messages;return b},normalizeRule:function(b){if(typeof b=="string"){var c={};a.each(b.split(/\s/),function(){c[this]=!0});b=c}return b},addMethod:function(b,c,d){a.validator.methods[b]=c;a.validator.messages[b]=d!=undefined?d:a.validator.messages[b];c.length<3&&a.validator.addClassRules(b,a.validator.normalizeRule(b))},methods:{required:function(b,c,d){if(!this.depend(d,c))return"dependency-mismatch";switch(c.nodeName.toLowerCase()){case"select":var e=a(c).val();return e&&e.length>0;case"input":if(this.checkable(c))return this.getLength(b,c)>0;default:return a.trim(b).length>0}},remote:function(b,c,d){if(this.optional(c))return"dependency-mismatch";var e=this.previousValue(c);this.settings.messages[c.name]||(this.settings.messages[c.name]={});e.originalMessage=this.settings.messages[c.name].remote;this.settings.messages[c.name].remote=e.message;d=typeof d=="string"&&{url:d}||d;if(e.old!==b){e.old=b;var f=this;this.startRequest(c);var g={};g[c.name]=b;a.ajax(a.extend(!0,{url:d,mode:"abort",port:"validate"+c.name,dataType:"json",data:g,success:function(d){f.settings.messages[c.name].remote=e.originalMessage;var g=d===!0;if(g){var h=f.formSubmitted;f.prepareElement(c);f.formSubmitted=h;f.successList.push(c);f.showErrors()}else{var i={},j=e.message=d||f.defaultMessage(c,"remote");i[c.name]=a.isFunction(j)?j(b):j;f.showErrors(i)}e.valid=g;f.stopRequest(c,g)}},d));return"pending"}return this.pending[c.name]?"pending":e.valid},minlength:function(b,c,d){return this.optional(c)||this.getLength(a.trim(b),c)>=d},maxlength:function(b,c,d){return this.optional(c)||this.getLength(a.trim(b),c)<=d},rangelength:function(b,c,d){var e=this.getLength(a.trim(b),c);return this.optional(c)||e>=d[0]&&e<=d[1]},min:function(a,b,c){return this.optional(b)||a>=c},max:function(a,b,c){return this.optional(b)||a<=c},range:function(a,b,c){return this.optional(b)||a>=c[0]&&a<=c[1]},email:function(a,b){return this.optional(b)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(a)},url:function(a,b){return this.optional(b)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},date:function(a,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(a))},dateISO:function(a,b){return this.optional(b)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},number:function(a,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},creditcard:function(a,b){if(this.optional(b))return"dependency-mismatch";if(/[^0-9-]+/.test(a))return!1;var c=0,d=0,e=!1;a=a.replace(/\D/g,"");for(var f=a.length-1;f>=0;f--){var g=a.charAt(f),d=parseInt(g,10);e&&(d*=2)>9&&(d-=9);c+=d;e=!e}return c%10==0},accept:function(a,b,c){c=typeof c=="string"?c.replace(/,/g,"|"):"png|jpe?g|gif";return this.optional(b)||a.match(new RegExp(".("+c+")$","i"))},equalTo:function(b,c,d){var e=a(d).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(c).valid()});return b==e.val()}}});a.format=a.validator.format})(jQuery);(function(a){var b=a.ajax,c={};a.ajax=function(d){d=a.extend(d,a.extend({},a.ajaxSettings,d));var e=d.port;if(d.mode=="abort"){c[e]&&c[e].abort();return c[e]=b.apply(this,arguments)}return b.apply(this,arguments)}})(jQuery);(function(a){a.each({focus:"focusin",blur:"focusout"},function(b,c){a.event.special[c]={setup:function(){if(a.browser.msie)return!1;this.addEventListener(b,a.event.special[c].handler,!0)},teardown:function(){if(a.browser.msie)return!1;this.removeEventListener(b,a.event.special[c].handler,!0)},handler:function(b){arguments[0]=a.event.fix(b);arguments[0].type=c;return a.event.handle.apply(this,arguments)}}});a.extend(a.fn,{delegate:function(b,c,d){return this.bind(b,function(b){var e=a(b.target);if(e.is(c))return d.apply(e,arguments)})},triggerEvent:function(b,c){return this.triggerHandler(b,[a.event.fix({type:b,target:c})])}})})(jQuery);(function(a){a.dxSlider=function(b,c){function q(){f.find("."+e.arrowClasses.next).unbind("click").click(function(){e.type=="horizontal"?r("next"):s("next");return!1});f.find("."+e.arrowClasses.previous).unbind("click").click(function(){e.type=="horizontal"?r("previous"):s("previous");return!1})}function r(c){if(i<=l)return;if(p)return;p=!0;c=="next"?i==l+k?k=0:k=k>j?j:k==j?k=0:k+=1:k=k<0?0:k==0?k=i-l:k-=1;margin=-k*m;a("ul",b).animate({marginLeft:margin},e.speed,function(){p=!1})}function s(c){if(i<=l)return;if(p)return;p=!0;c=="next"?i==l+k?k=0:k=k>j?j:k==j?k=0:k+=1:k=k<0?0:k==0?k=i-l:k-=1;margin=-k*o;a("ul",b).animate({marginTop:margin},e.speed,function(){p=!1})}function t(){var a=f.find("li");g=f.find("."+e.wrapperClass);i=a.length;m=a.innerWidth();m==0&&(m=a.css("width").replace("px","")*1);h=g.width();h==0&&(h=g.css("width").replace("px","")*1);j=i-1;k=0;l=h/m}function u(){var a=f.find("li");g=f.find("."+e.wrapperClass);i=a.length;o=a.innerHeight();o==0&&(o=a.css("height").replace("px","")*1);n=g.height();n==0&&(n=g.css("height").replace("px","")*1);j=i-1;k=0;l=n/o}function v(){return i*m}function w(b){a("ul",f).css("width",b)}function x(){return a("ul",f).width()}function y(){return i*o}function z(b){a("ul",f).css("height",b)}function A(){return a("ul",f).height()}function B(){if(e.type=="horizontal"){t();w(v())}else{u();z(y())}q()}function C(){B();a("ul",b).css({marginLeft:0})}function D(a){e.debug&&console.log(a)}var d={speed:400,type:"horizontal",arrowClasses:{previous:"prev",next:"next"},wrapperClass:"wrap",debug:!1},e=a.extend(d,c),f=a(b);f.find(".wrap")||f.find("ul").wrap('<div class="'+e.wrapperClass+'"></div>');f.prepend('<a href="#" class="'+e.arrowClasses.previous+'">previous</a>').append('<a href="#" class="'+e.arrowClasses.next+'">next</a>');var g,h,i,j,k,l,m,n,o,p=!1;B();var E={reInit:C,getUlWidth:x};return E};a.fn.dxSlider=function(b){return this.each(function(){if(a(this).data("dxSlider"))typeof b!="undefined"&&a(this).data("dxSlider")[b]();else{var c=a.dxSlider(this,b);a(this).data("dxSlider",c)}})}})(jQuery);(function(a){function b(){if(a.fn.ajaxSubmit.debug){var b="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(b):window.opera&&window.opera.postError&&window.opera.postError(b)}}a.fn.ajaxSubmit=function(c){function r(){function p(){var b=l.attr("target"),c=l.attr("action");d.setAttribute("target",f);d.getAttribute("method")!="POST"&&d.setAttribute("method","POST");d.getAttribute("action")!=e.url&&d.setAttribute("action",e.url);e.skipEncodingOverride||l.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});e.timeout&&setTimeout(function(){m=!0;t()},e.timeout);var g=[];try{if(e.extraData)for(var j in e.extraData)g.push(a('<input type="hidden" name="'+j+'" value="'+e.extraData[j]+'" />').appendTo(d)[0]);h.appendTo("body");i.attachEvent?i.attachEvent("onload",t):i.addEventListener("load",t,!1);d.submit()}finally{d.setAttribute("action",c);b?d.setAttribute("target",b):l.removeAttr("target");a(g).remove()}}function t(){r=i.contentWindow?i.contentWindow.document:i.contentDocument?i.contentDocument:i.document;if(!r||r.location.href==e.iframeSrc)return;i.detachEvent?i.detachEvent("onload",t):i.removeEventListener("load",t,!1);var c=!0;try{if(m)throw"timeout";var d=e.dataType=="xml"||r.XMLDocument||a.isXMLDoc(r);b("isXml="+d);if(!d&&window.opera&&(r.body==null||r.body.innerHTML=="")&&--s){b("requeing onLoad callback, DOM not available");setTimeout(t,250);return}j.responseText=r.body?r.body.innerHTML:r.documentElement?r.documentElement.innerHTML:null;j.responseXML=r.XMLDocument?r.XMLDocument:r;j.getResponseHeader=function(a){var b={"content-type":e.dataType};return b[a]};var f=/(json|script)/.test(e.dataType);if(f||e.textarea){var g=r.getElementsByTagName("textarea")[0];if(g)j.responseText=g.value;else if(f){var l=r.getElementsByTagName("pre")[0],n=r.getElementsByTagName("body")[0];l?j.responseText=l.textContent:n&&(j.responseText=n.innerHTML)}}else e.dataType=="xml"&&!j.responseXML&&j.responseText!=null&&(j.responseXML=u(j.responseText));q=w(j,e.dataType,e)}catch(o){b("error caught:",o);c=!1;j.error=o;e.error.call(e.context,j,"error",o);k&&a.event.trigger("ajaxError",[j,e,o])}if(j.aborted){b("upload aborted");c=!1}if(c){e.success.call(e.context,q,"success",j);k&&a.event.trigger("ajaxSuccess",[j,e])}k&&a.event.trigger("ajaxComplete",[j,e]);k&&!--a.active&&a.event.trigger("ajaxStop");e.complete&&e.complete.call(e.context,j,c?"success":"error");setTimeout(function(){h.removeData("form-plugin-onload");h.remove();j.responseXML=null},100)}var d=l[0];if(a(":input[name=submit],:input[id=submit]",d).length){alert('Error: Form elements must not have name or id of "submit".');return}var e=a.extend(!0,{},a.ajaxSettings,c);e.context=e.context||e;var f="jqFormIO"+(new Date).getTime(),g="_"+f,h=a('<iframe id="'+f+'" name="'+f+'" src="'+e.iframeSrc+'" />'),i=h[0];h.css({position:"absolute",top:"-1000px",left:"-1000px"});var j={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){this.aborted=1;h.attr("src",e.iframeSrc)}},k=e.global;k&&!(a.active++)&&a.event.trigger("ajaxStart");k&&a.event.trigger("ajaxSend",[j,e]);if(e.beforeSend&&e.beforeSend.call(e.context,j,e)===!1){e.global&&a.active--;return}if(j.aborted)return;var m=0,n=d.clk;if(n){var o=n.name;if(o&&!n.disabled){e.extraData=e.extraData||{};e.extraData[o]=n.value;if(n.type=="image"){e.extraData[o+".x"]=d.clk_x;e.extraData[o+".y"]=d.clk_y}}}e.forceSync?p():setTimeout(p,10);var q,r,s=50,u=a.parseXML||function(a,b){if(window.ActiveXObject){b=new ActiveXObject("Microsoft.XMLDOM");b.async="false";b.loadXML(a)}else b=(new DOMParser).parseFromString(a,"text/xml");return b&&b.documentElement&&b.documentElement.nodeName!="parsererror"?b:null},v=a.parseJSON||function(a){return window.eval("("+a+")")},w=function(b,c,d){var e=b.getResponseHeader("content-type")||"",f=c==="xml"||!c&&e.indexOf("xml")>=0,g=f?b.responseXML:b.responseText;f&&g.documentElement.nodeName==="parsererror"&&a.error&&a.error("parsererror");d&&d.dataFilter&&(g=d.dataFilter(g,c));typeof g=="string"&&(c==="json"||!c&&e.indexOf("json")>=0?g=v(g):(c==="script"||!c&&e.indexOf("javascript")>=0)&&a.globalEval(g));return g}}if(!this.length){b("ajaxSubmit: skipping submit process - no element selected");return this}typeof c=="function"&&(c={success:c});var d=this.attr("action"),e=typeof d=="string"?a.trim(d):"";e&&(e=(e.match(/^([^#]+)/)||[])[1]);e=e||window.location.href||"";c=a.extend(!0,{url:e,type:this[0].getAttribute("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},c);var f={};this.trigger("form-pre-serialize",[this,c,f]);if(f.veto){b("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(c.beforeSerialize&&c.beforeSerialize(this,c)===!1){b("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var g,h,i=this.formToArray(c.semantic);if(c.data){c.extraData=c.data;for(g in c.data)if(c.data[g]instanceof Array)for(var j in c.data[g])i.push({name:g,value:c.data[g][j]});else{h=c.data[g];h=a.isFunction(h)?h():h;i.push({name:g,value:h})}}if(c.beforeSubmit&&c.beforeSubmit(i,this,c)===!1){b("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[i,this,c,f]);if(f.veto){b("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var k=a.param(i);if(c.type.toUpperCase()=="GET"){c.url+=(c.url.indexOf("?")>=0?"&":"?")+k;c.data=null}else c.data=k;var l=this,m=[];c.resetForm&&m.push(function(){l.resetForm()});c.clearForm&&m.push(function(){l.clearForm()});if(!c.dataType&&c.target){var n=c.success||function(){};m.push(function(b){var d=c.replaceTarget?"replaceWith":"html";a(c.target)[d](b).each(n,arguments)})}else c.success&&m.push(c.success);c.success=function(a,b,d){var e=c.context||c;for(var f=0,g=m.length;f<g;f++)m[f].apply(e,[a,b,d||l,l])};var o=a("input:file",this).length>0,p="multipart/form-data",q=l.attr("enctype")==p||l.attr("encoding")==p;c.iframe!==!1&&(o||c.iframe||q)?c.closeKeepAlive?a.get(c.closeKeepAlive,r):r():a.ajax(c);this.trigger("form-submit-notify",[this,c]);return this};a.fn.ajaxForm=function(c){if(this.length===0){var d={s:this.selector,c:this.context};if(!a.isReady&&d.s){b("DOM not ready, queuing ajaxForm");a(function(){a(d.s,d.c).ajaxForm(c)});return this}b("terminating; zero elements found by selector"+(a.isReady?"":" (DOM not ready)"));return this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(b){if(!b.isDefaultPrevented()){b.preventDefault();a(this).ajaxSubmit(c)}}).bind("click.form-plugin",function(b){var c=b.target,d=a(c);if(!d.is(":submit,input:image")){var e=d.closest(":submit");if(e.length==0)return;c=e[0]}var f=this;f.clk=c;if(c.type=="image")if(b.offsetX!=undefined){f.clk_x=b.offsetX;f.clk_y=b.offsetY}else if(typeof a.fn.offset=="function"){var g=d.offset();f.clk_x=b.pageX-g.left;f.clk_y=b.pageY-g.top}else{f.clk_x=b.pageX-c.offsetLeft;f.clk_y=b.pageY-c.offsetTop}setTimeout(function(){f.clk=f.clk_x=f.clk_y=null},100)})};a.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};a.fn.formToArray=function(b){var c=[];if(this.length===0)return c;var d=this[0],e=b?d.getElementsByTagName("*"):d.elements;if(!e)return c;var f,g,h,i,j,k,l;for(f=0,k=e.length;f<k;f++){j=e[f];h=j.name;if(!h)continue;if(b&&d.clk&&j.type=="image"){if(!j.disabled&&d.clk==j){c.push({name:h,value:a(j).val()});c.push({name:h+".x",value:d.clk_x},{name:h+".y",value:d.clk_y})}continue}i=a.fieldValue(j,!0);if(i&&i.constructor==Array)for(g=0,l=i.length;g<l;g++)c.push({name:h,value:i[g]});else i!==null&&typeof i!="undefined"&&c.push({name:h,value:i})}if(!b&&d.clk){var m=a(d.clk),n=m[0];h=n.name;if(h&&!n.disabled&&n.type=="image"){c.push({name:h,value:m.val()});c.push({name:h+".x",value:d.clk_x},{name:h+".y",value:d.clk_y})}}return c};a.fn.formSerialize=function(b){return a.param(this.formToArray(b))};a.fn.fieldSerialize=function(b){var c=[];this.each(function(){var d=this.name;if(!d)return;var e=a.fieldValue(this,b);if(e&&e.constructor==Array)for(var f=0,g=e.length;f<g;f++)c.push({name:d,value:e[f]});else e!==null&&typeof e!="undefined"&&c.push({name:this.name,value:e})});return a.param(c)};a.fn.fieldValue=function(b){for(var c=[],d=0,e=this.length;d<e;d++){var f=this[d],g=a.fieldValue(f,b);if(g===null||typeof g=="undefined"||g.constructor==Array&&!g.length)continue;g.constructor==Array?a.merge(c,g):c.push(g)}return c};a.fieldValue=function(b,c){var d=b.name,e=b.type,f=b.tagName.toLowerCase();c===undefined&&(c=!0);if(c&&(!d||b.disabled||e=="reset"||e=="button"||(e=="checkbox"||e=="radio")&&!b.checked||(e=="submit"||e=="image")&&b.form&&b.form.clk!=b||f=="select"&&b.selectedIndex==-1))return null;if(f=="select"){var g=b.selectedIndex;if(g<0)return null;var h=[],i=b.options,j=e=="select-one",k=j?g+1:i.length;for(var l=j?g:0;l<k;l++){var m=i[l];if(m.selected){var n=m.value;n||(n=m.attributes&&m.attributes.value&&!m.attributes.value.specified?m.text:m.value
);if(j)return n;h.push(n)}}return h}return a(b).val()};a.fn.clearForm=function(){return this.each(function(){a("input,select,textarea",this).clearFields()})};a.fn.clearFields=a.fn.clearInputs=function(){return this.each(function(){var a=this.type,b=this.tagName.toLowerCase();a=="text"||a=="password"||b=="textarea"?this.value="":a=="checkbox"||a=="radio"?this.checked=!1:b=="select"&&(this.selectedIndex=-1)})};a.fn.resetForm=function(){return this.each(function(){(typeof this.reset=="function"||typeof this.reset=="object"&&!this.reset.nodeType)&&this.reset()})};a.fn.enable=function(a){a===undefined&&(a=!0);return this.each(function(){this.disabled=!a})};a.fn.selected=function(b){b===undefined&&(b=!0);return this.each(function(){var c=this.type;if(c=="checkbox"||c=="radio")this.checked=b;else if(this.tagName.toLowerCase()=="option"){var d=a(this).parent("select");b&&d[0]&&d[0].type=="select-one"&&d.find("option").selected(!1);this.selected=b}})}})(jQuery);(function(a){a.fn.superfish=function(b){var c=a.fn.superfish,d=c.c,e=a(['<span class="',d.arrowClass,'"> &#187;</span>'].join("")),f=function(){var b=a(this),c=h(b);clearTimeout(c.sfTimer);b.showSuperfishUl().siblings().hideSuperfishUl()},g=function(){var b=a(this),d=h(b),e=c.op;clearTimeout(d.sfTimer);d.sfTimer=setTimeout(function(){e.retainPath=a.inArray(b[0],e.$path)>-1;b.hideSuperfishUl();e.$path.length&&b.parents(["li.",e.hoverClass].join("")).length<1&&f.call(e.$path)},e.delay)},h=function(a){var b=a.parents(["ul.",d.menuClass,":first"].join(""))[0];c.op=c.o[b.serial];return b},i=function(a){a.addClass(d.anchorClass).append(e.clone())};return this.each(function(){var e=this.serial=c.o.length,h=a.extend({},c.defaults,b);h.$path=a("li."+h.pathClass,this).slice(0,h.pathLevels).each(function(){a(this).addClass([h.hoverClass,d.bcClass].join(" ")).filter("li:has(ul)").removeClass(h.pathClass)});c.o[e]=c.op=h;a("li:has(ul)",this)[a.fn.hoverIntent&&!h.disableHI?"hoverIntent":"hover"](f,g).each(function(){h.autoArrows&&i(a(">a:first-child",this))}).not("."+d.bcClass).hideSuperfishUl();var j=a("a",this);j.each(function(a){var b=j.eq(a).parents("li");j.eq(a).focus(function(){f.call(b)}).blur(function(){g.call(b)})});h.onInit.call(this)}).each(function(){var b=[d.menuClass];c.op.dropShadows&&!(a.browser.msie&&a.browser.version<7)&&b.push(d.shadowClass);a(this).addClass(b.join(" "))})};var b=a.fn.superfish;b.o=[];b.op={};b.IE7fix=function(){var c=b.op;a.browser.msie&&a.browser.version>6&&c.dropShadows&&c.animation.opacity!=undefined&&this.toggleClass(b.c.shadowClass+"-off")};b.c={bcClass:"sf-breadcrumb",menuClass:"sf-js-enabled",anchorClass:"sf-with-ul",arrowClass:"sf-sub-indicator",shadowClass:"sf-shadow"};b.defaults={hoverClass:"sfHover",pathClass:"overideThisToUse",pathLevels:1,delay:800,animation:{opacity:"show"},speed:"normal",autoArrows:!0,dropShadows:!0,disableHI:!1,onInit:function(){},onBeforeShow:function(){},onShow:function(){},onHide:function(){}};a.fn.extend({hideSuperfishUl:function(){var c=b.op,d=c.retainPath===!0?c.$path:"";c.retainPath=!1;var e=a(["li.",c.hoverClass].join(""),this).add(this).not(d).removeClass(c.hoverClass).find(">ul").hide().css("visibility","hidden");c.onHide.call(e);return this},showSuperfishUl:function(){var a=b.op,c=b.c.shadowClass+"-off",d=this.addClass(a.hoverClass).find(">ul:hidden").css("visibility","visible");b.IE7fix.call(d);a.onBeforeShow.call(d);d.animate(a.animation,a.speed,function(){b.IE7fix.call(d);a.onShow.call(d)});return this}})})(jQuery);(function(a){a.flexslider=function(b,c){var d=a(b),e=a.extend({},a.flexslider.defaults,c),f=e.namespace,g="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,h=g?"touchend":"click",i=e.direction==="vertical",j=e.reverse,k=e.itemWidth>0,l=e.animation==="fade",m=e.asNavFor!=="",n={};a.data(b,"flexslider",d);n={init:function(){d.animating=!1;d.currentSlide=e.startAt;d.animatingTo=d.currentSlide;d.atEnd=d.currentSlide===0||d.currentSlide===d.last;d.containerSelector=e.selector.substr(0,e.selector.search(" "));d.slides=a(e.selector,d);d.container=a(d.containerSelector,d);d.count=d.slides.length;d.syncExists=a(e.sync).length>0;e.animation==="slide"&&(e.animation="swing");d.prop=i?"top":"marginLeft";d.args={};d.manualPause=!1;d.transitions=!e.video&&!l&&e.useCSS&&function(){var a=document.createElement("div"),b=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var c in b)if(a.style[b[c]]!==undefined){d.pfx=b[c].replace("Perspective","").toLowerCase();d.prop="-"+d.pfx+"-transform";return!0}return!1}();if(e.controlsContainer!==""){d.controlsContainer=e.controlsContainer.substring(0,1)==="#"?a(e.controlsContainer):a(e.controlsContainer).eq(a(d.containerSelector).index(d.container));d.containerExists=d.controlsContainer.length>0}if(e.manualControls!==""){d.manualControls=a(e.manualControls,d.containerExists?d.controlsContainer:d);d.manualExists=d.manualControls.length>0}if(e.randomize){d.slides.sort(function(){return Math.round(Math.random())-.5});d.container.empty().append(d.slides)}d.doMath();d.setup("init");m&&n.asNav.setup();e.controlNav&&n.controlNav.setup();e.directionNav&&n.directionNav.setup();e.keyboard&&(a(d.containerSelector).length===1||e.multipleKeyboard)&&a(document).bind("keyup",function(a){var b=a.keyCode;if(!d.animating&&(b===39||b===37)){var c=b===39?d.getTarget("next"):b===37?d.getTarget("prev"):!1;d.flexAnimate(c,e.pauseOnAction)}});e.mousewheel&&d.bind("mousewheel",function(a,b,c,f){a.preventDefault();var g=b<0?d.getTarget("next"):d.getTarget("prev");d.flexAnimate(g,e.pauseOnAction)});e.pausePlay&&n.pausePlay.setup();if(e.slideshow){e.pauseOnHover&&d.hover(function(){d.pause()},function(){d.manualPause||d.play()});e.initDelay>0?setTimeout(d.play,e.initDelay):d.play()}g&&e.touch&&n.touch();(!l||l&&e.smoothHeight)&&n.resize();setTimeout(function(){e.start(d)},200)},asNav:{setup:function(){d.currentItem=d.currentSlide;d.slides.removeClass(f+"active-slide").eq(d.currentItem).addClass(f+"active-slide");d.slides.click(function(b){b.preventDefault();var c=a(this),f=c.index();if(!a(e.asNavFor).data("flexslider").animating&&!c.hasClass("active")){d.direction=d.currentItem<f?"next":"prev";d.flexAnimate(f,e.pauseOnAction,!1,!0,!0)}})}},controlNav:{setup:function(){typeof e.controlNav=="number"?n.controlNav.setupThumbSlider():d.manualExists?n.controlNav.setupManual():n.controlNav.setupPaging()},setupThumbSlider:function(){var b=a('<div class="slider"></div>')},setupPaging:function(){var b=e.controlNav==="thumbnails"?"control-thumbs":"control-paging",c=a('<ol class="'+f+"control-nav "+f+b+'"></ol>'),g=1,i;for(var j=0;j<d.pagingCount;j++){i=e.controlNav==="thumbnails"?'<img src="'+d.slides.eq(j).attr("data-thumb")+'"/>':"<a>"+g+"</a>";c.append("<li>"+i+"</li>");g++}d.containerExists?a(d.controlsContainer).append(c):d.append(c);n.controlNav.set();n.controlNav.active();d.controlNav.closest("."+f+"control-nav").bind(h,function(b){b.preventDefault();var c=a(b.target);if(this!==b.target&&!c.hasClass("active")){d.direction=d.controlNav.index(c)>d.currentSlide?"next":"prev";d.flexAnimate(d.controlNav.index(c),e.pauseOnAction)}})},setupManual:function(){d.controlNav=d.manualControls;n.controlNav.active();d.controlNav.live(h,function(b){b.preventDefault();var c=a(this),f=d.controlNav.index(c);if(!c.hasClass("active")){f>d.currentSlide?d.direction="next":d.direction="prev";d.flexAnimate(f,e.pauseOnAction)}})},set:function(){var b=e.controlNav==="thumbnails"?"img":"a";d.controlNav=a("."+f+"control-nav li "+b,d.controlsContainer?d.controlsContainer:d)},active:function(){d.controlNav.removeClass("active").eq(d.animatingTo).addClass("active")},update:function(b,c){b==="add"?d.controlNav.closest("."+f+"control-nav").append(a("<li><a>"+d.count+"</a></li>")):d.controlNav.eq(c).closest("li").remove();n.controlNav.set();d.pagingCount!==d.controlNav.length?d.update(c,b):n.controlNav.active()}},directionNav:{setup:function(){var b=a('<ul class="'+f+'direction-nav"><li><a class="'+f+'prev" href="#">'+e.prevText+'</a></li><li><a class="'+f+'next" href="#">'+e.nextText+"</a></li></ul>");if(d.containerExists){a(d.controlsContainer).append(b);d.directionNav=a("."+f+"direction-nav li a",d.controlsContainer)}else{d.append(b);d.directionNav=a("."+f+"direction-nav li a",d)}n.directionNav.update();d.directionNav.bind(h,function(b){b.preventDefault();var c=a(this).hasClass(f+"next")?d.getTarget("next"):d.getTarget("prev");d.flexAnimate(c,e.pauseOnAction)})},update:function(){e.animationLoop||(d.animatingTo===0?d.directionNav.removeClass("disabled").filter("."+f+"prev").addClass("disabled"):d.animatingTo===d.last?d.directionNav.removeClass("disabled").filter("."+f+"next").addClass("disabled"):d.directionNav.removeClass("disabled"))}},pausePlay:{setup:function(){var b=a('<div class="'+f+'pauseplay"><a></a></div>');if(d.containerExists){d.controlsContainer.append(b);d.pausePlay=a("."+f+"pauseplay a",d.controlsContainer)}else{d.append(b);d.pausePlay=a("."+f+"pauseplay a",d)}n.pausePlay.update(e.slideshow?f+"pause":f+"play");d.pausePlay.bind(h,function(b){b.preventDefault();if(a(this).hasClass(f+"pause")){d.pause();d.manualPause=!0}else{d.play();d.manualPause=!1}})},update:function(a){a==="play"?d.pausePlay.removeClass(f+"pause").addClass(f+"play").text(e.playText):d.pausePlay.removeClass(f+"play").addClass(f+"pause").text(e.pauseText)}},touch:function(){function o(h){if(d.animating)h.preventDefault();else if(h.touches.length===1){d.pause();g=i?d.h:d.w;m=Number(new Date);f=k&&j&&d.animatingTo===d.last?0:k&&j?d.limit-(d.itemW+e.itemMargin)*d.move*d.animatingTo:k&&d.currentSlide===d.last?d.limit:k?(d.itemW+e.itemMargin)*d.move*d.currentSlide:j?(d.last-d.currentSlide+d.cloneOffset)*g:(d.currentSlide+d.cloneOffset)*g;a=i?h.touches[0].pageY:h.touches[0].pageX;c=i?h.touches[0].pageX:h.touches[0].pageY;b.addEventListener("touchmove",p,!1);b.addEventListener("touchend",q,!1)}}function p(b){h=i?a-b.touches[0].pageY:a-b.touches[0].pageX;n=i?Math.abs(h)<Math.abs(b.touches[0].pageX-c):Math.abs(h)<Math.abs(b.touches[0].pageY-c);if(!n||Number(new Date)-m>500){b.preventDefault();if(!l&&d.transitions){e.animationLoop||(h/=d.currentSlide===0&&h<0||d.currentSlide===d.last&&h>0?Math.abs(h)/g+2:1);d.setProps(f+h,"setTouch")}}}function q(i){if(d.animatingTo===d.currentSlide&&!n&&h!==null){var k=j?-h:h,l=k>0?d.getTarget("next"):d.getTarget("prev");d.canAdvance(l)&&(Number(new Date)-m<550&&Math.abs(k)>20||Math.abs(k)>g/2)?d.flexAnimate(l,e.pauseOnAction):d.flexAnimate(d.currentSlide,e.pauseOnAction,!0)}b.removeEventListener("touchmove",p,!1);b.removeEventListener("touchend",q,!1);a=null;c=null;h=null;f=null}var a,c,f,g,h,m,n=!1;b.addEventListener("touchstart",o,!1)},resize:function(){a(window).bind("resize",function(){if(!d.animating&&d.is(":visible")){k||d.doMath();if(l)n.smoothHeight();else if(k){d.slides.width(d.computedW);d.update(d.pagingCount);d.setProps(d.w)}else if(i){d.viewport.height(d.h);d.setProps(d.h,"setTotal")}else{e.smoothHeight&&n.smoothHeight();d.newSlides.width(d.w);d.setProps(d.w,"setTotal")}}})},smoothHeight:function(a){if(!i||l){var b=l?d:d.viewport;a?b.animate({height:d.slides.eq(d.animatingTo).height()},a):b.height(d.slides.eq(d.animatingTo).height())}},sync:function(b){var c=a(e.sync).data("flexslider"),f=d.animatingTo;switch(b){case"animate":c.flexAnimate(f,e.pauseOnAction,!1,!0);break;case"play":c.playing||c.play();break;case"pause":c.pause()}}};d.flexAnimate=function(b,c,g,h,o){if(!d.animating&&(d.canAdvance(b)||g)&&d.is(":visible")){if(m&&h){var p=a(e.asNavFor).data("flexslider");d.atEnd=b===0||b===d.count-1;p.flexAnimate(b,p.pauseOnAction,!1,!0,o);d.direction=d.currentItem<b?"next":"prev";p.direction=d.direction;if(Math.ceil((b+1)/d.visible)-1===d.currentSlide||b===0){d.currentItem=b;d.slides.removeClass(f+"active-slide").eq(b).addClass(f+"active-slide");return!1}d.currentItem=b;d.slides.removeClass(f+"active-slide").eq(b).addClass(f+"active-slide");b=Math.floor(b/d.visible)}d.animating=!0;d.animatingTo=b;e.before(d);d.syncExists&&!o&&n.sync("animate");c&&d.pause();e.controlNav&&n.controlNav.active();k||d.slides.removeClass(f+"active-slide").eq(b).addClass(f+"active-slide");d.atEnd=b===0||b===d.last;e.directionNav&&n.directionNav.update();if(b===d.last){e.end(d);e.animationLoop||d.pause()}if(!l){var q=i?d.slides.filter(":first").height():d.slides.filter(":first").width(),r,s;if(k){s=(d.itemW+e.itemMargin)*d.move*b;r=s>d.limit?d.limit:s}else d.currentSlide===0&&b===d.count-1&&e.animationLoop&&d.direction!=="next"?r=j?(d.count+d.cloneOffset)*q:0:d.currentSlide===d.last&&b===0&&e.animationLoop&&d.direction!=="prev"?r=j?0:(d.count+1)*q:r=j?(d.count-1-b+d.cloneOffset)*q:(b+d.cloneOffset)*q;d.setProps(r,"",e.animationSpeed);d.transitions?d.container.one("webkitTransitionEnd transitionend",function(){d.wrapup(q)}):d.container.animate(d.args,e.animationSpeed,e.easing,function(){d.wrapup(q)})}else{d.slides.eq(d.currentSlide).fadeOut(e.animationSpeed,e.easing);d.slides.eq(b).fadeIn(e.animationSpeed,e.easing,function(){d.wrapup()})}e.smoothHeight&&n.smoothHeight(e.animationSpeed)}};d.wrapup=function(a){!l&&!k&&(d.currentSlide===0&&d.animatingTo===d.last&&e.animationLoop?d.setProps(a,"jumpEnd"):d.currentSlide===d.last&&d.animatingTo===0&&e.animationLoop&&d.setProps(a,"jumpStart"));d.animating=!1;d.currentSlide=d.animatingTo;e.after(d)};d.animateSlides=function(){d.animating||d.flexAnimate(d.getTarget("next"))};d.pause=function(){clearInterval(d.animatedSlides);d.playing=!1;e.pausePlay&&n.pausePlay.update("play");d.syncExists&&n.sync("pause")};d.play=function(){d.animatedSlides=setInterval(d.animateSlides,e.slideshowSpeed);d.playing=!0;e.pausePlay&&n.pausePlay.update("pause");d.syncExists&&n.sync("play")};d.canAdvance=function(a){var b=m?d.pagingCount-1:d.last;return m&&d.currentItem===0&&a===d.pagingCount-1&&d.direction!=="next"?!1:a===d.currentSlide&&!m?!1:e.animationLoop?!0:d.atEnd&&d.currentSlide===0&&a===b&&d.direction!=="next"?!1:d.atEnd&&d.currentSlide===b&&a===0&&d.direction==="next"?!1:!0};d.getTarget=function(a){d.direction=a;return a==="next"?d.currentSlide===d.last?0:d.currentSlide+1:d.currentSlide===0?d.last:d.currentSlide-1};d.setProps=function(a,b,c){var f=function(){if(k)return b==="setTouch"?a:j&&d.animatingTo===d.last?0:j?d.limit-(d.itemW+e.itemMargin)*d.move*d.animatingTo:d.animatingTo===d.last?d.limit:(d.itemW+e.itemMargin)*d.move*d.animatingTo;switch(b){case"setTotal":return j?(d.count-1-d.currentSlide+d.cloneOffset)*a:(d.currentSlide+d.cloneOffset)*a;case"setTouch":return j?a:a;case"jumpEnd":return j?a:d.count*a;case"jumpStart":return j?d.count*a:a;default:return a}}();f=f*-1+"px";if(d.transitions){f=i?"translate3d(0,"+f+",0)":"translate3d("+f+",0,0)";c=c!==undefined?c/1e3+"s":"0s";d.container.css("-"+d.pfx+"-transition-duration",c)}d.args[d.prop]=f;(d.transitions||c===undefined)&&d.container.css(d.args)};d.setup=function(b){if(!l){var c,g;if(b==="init"){d.viewport=a('<div class="flex-viewport"></div>').css({overflow:"hidden",position:"relative"}).appendTo(d).append(d.container);d.cloneCount=0;d.cloneOffset=0;if(j){g=a.makeArray(d.slides).reverse();d.slides=a(g);d.container.empty().append(d.slides)}}if(e.animationLoop&&!k){d.cloneCount=2;d.cloneOffset=1;b!=="init"&&d.container.find(".clone").remove();d.container.append(d.slides.first().clone().addClass("clone")).prepend(d.slides.last().clone().addClass("clone"))}d.newSlides=a(e.selector,d);c=j?d.count-1-d.currentSlide+d.cloneOffset:d.currentSlide+d.cloneOffset;if(i&&!k){d.container.height((d.count+d.cloneCount)*200+"%").css("position","absolute").width("100%");setTimeout(function(){d.newSlides.css({display:"block"});d.doMath();d.viewport.height(d.h);d.setProps(c*d.h,"init")},b==="init"?100:0)}else{d.container.width((d.count+d.cloneCount)*200+"%");d.setProps(c*d.w,"init");setTimeout(function(){d.doMath();d.newSlides.css({width:d.computedW,"float":"left",display:"block"});e.smoothHeight&&n.smoothHeight()},b==="init"?100:0)}}else{d.slides.css({width:"100%","float":"left",marginRight:"-100%"});b==="init"&&d.slides.eq(d.currentSlide).fadeIn(e.animationSpeed,e.easing);e.smoothHeight&&n.smoothHeight()}k||d.slides.removeClass(f+"active-slide").eq(d.currentSlide).addClass(f+"active-slide")};d.doMath=function(){var a=d.slides.first(),b=e.itemMargin,c=e.minItems,f=e.maxItems;d.w=d.width();d.h=a.height();d.boxPadding=a.outerWidth()-a.width();if(k){d.itemT=e.itemWidth+b;d.minW=c?c*d.itemT:d.w;d.maxW=f?f*d.itemT:d.w;d.itemW=d.minW>d.w?(d.w-b*c)/c:d.maxW<d.w?(d.w-b*f)/f:e.itemWidth;d.visible=Math.floor(d.w/(d.itemW+b));d.move=e.move>0&&e.move<d.visible?e.move:d.visible;d.pagingCount=Math.ceil((d.count-d.visible)/d.move+1);d.last=d.pagingCount-1;d.limit=(d.itemW+b)*d.count-d.w}else{d.itemW=d.w;d.pagingCount=d.count;d.last=d.count-1}d.computedW=d.itemW-d.boxPadding};d.update=function(a,b){d.doMath();if(!k){a<d.currentSlide?d.currentSlide+=1:a<=d.currentSlide&&a!==0&&(d.currentSlide-=1);d.animatingTo=d.currentSlide}if(e.controlNav&&!d.manualExists)if(b==="add"&&!k||d.pagingCount>d.controlNav.length)n.controlNav.update("add");else if(b==="remove"&&!k||d.pagingCount<d.controlNav.length){if(k&&d.currentSlide>d.last){d.currentSlide-=1;d.animatingTo-=1}n.controlNav.update("remove",d.last)}e.directionNav&&n.directionNav.update()};d.addSlide=function(b,c){var f=a(b);d.count+=1;d.last=d.count-1;i&&j?c!==undefined?d.slides.eq(d.count-c).after(f):d.container.prepend(f):c!==undefined?d.slides.eq(c).before(f):d.container.append(f);d.update(c,"add");d.slides=a(e.selector+":not(.clone)",d);d.setup();e.added(d)};d.removeSlide=function(b){var c=isNaN(b)?d.slides.index(a(b)):b;d.count-=1;d.last=d.count-1;isNaN(b)?a(b,d.slides).remove():i&&j?d.slides.eq(d.last).remove():d.slides.eq(b).remove();d.doMath();d.update(c,"remove");d.slides=a(e.selector+":not(.clone)",d);d.setup();e.removed(d)};n.init()};a.flexslider.defaults={namespace:"flex-",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:!1,animationLoop:!0,smoothHeight:!1,startAt:0,slideshow:!0,slideshowSpeed:7e3,animationSpeed:600,initDelay:0,randomize:!1,pauseOnAction:!0,pauseOnHover:!1,useCSS:!0,touch:!0,video:!1,controlNav:!0,directionNav:!0,prevText:"Previous",nextText:"Next",keyboard:!0,multipleKeyboard:!1,mousewheel:!1,pausePlay:!1,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:0,maxItems:0,move:0,start:function(){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){}};a.fn.flexslider=function(b){if(typeof b=="object")return this.each(function(){var c=a(this),d=c.find(b.selector||".slides > li");if(d.length===1){d.fadeIn(400);b.start&&b.start(c)}else c.data("flexslider")===undefined&&new a.flexslider(this,b)});var c=a(this).data("flexslider");switch(b){case"play":c.play();break;case"pause":c.pause();break;case"next":c.flexAnimate(c.getTarget("next"),b.pauseOnAction);break;case"prev":case"previous":c.flexAnimate(c.getTarget("prev"),b.pauseOnAction);break;default:typeof b=="number"&&c.flexAnimate(b)}}})(jQuery);